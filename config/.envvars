#!/usr/bin/bash -i

export DOTFILES_DIR='$( cd "$( dirname "${BASH_SOURCE[0]}" )" && cd .. && pwd )'

BLUE='\[\033[01;34m\]'
CYAN='\[\033[0;36m\]'
GRAY='\[\033[1;30m\]'
GREEN='\[\033[1;32m\]'
LIGHT_CYAN='\[\033[1;36m\]'
LIGHT_WHITE='\[\033[1;37m\]'
MAGENTA='\[\033[0;35m\]'
ORANGE='\[\033[0;33m\]'
RED='\[\033[1;31m\]'
WHITE='\[\033[0;37m\]'
YELLOW='\[\033[1;33m\]'

case $(date +%b) in
    (Mar|Apr|May) COLOR1=$GREEN; COLOR2=$CYAN; COLOR3=$RED; COLOR4=$MAGENTA ;;
    (Jun|Jul|Aug) COLOR1=$RED; COLOR2=$ORANGE; COLOR3=$RED; COLOR4=$ORANGE ;;
    (Sep|Oct|Nov) COLOR1=$ORANGE; COLOR2=$YELLOW; COLOR3=$ORANGE; COLOR4=$YELLOW ;;
    (Dec|Jan|Feb) COLOR1=$CYAN; COLOR2=$GRAY; COLOR3=$BLUE; COLOR4=$LIGHT_CYAN ;;
esac


if [[ "${WSL_DISTRO_NAME}" = 'kali-linux' ]]; then
    PROMPT_SYMBOL=„âø
elif [[ "${WSL_DISTRO_NAME}" = 'Debian' ]]; then
    PROMPT_SYMBOL=üêß
elif [[ "${WSL_DISTRO_NAME}" = 'Ubuntu' ]]; then
    PROMPT_SYMBOL=‚öô
elif [[ "${HOSTNAME}" == *"raspberrypi"* ]]; then
    PROMPT_SYMBOL=üçì
elif [[ "${MSYSTEM}" = "MINGW64" ]]; then
    PROMPT_SYMBOL=ü™ü
fi

export VIRTUAL_ENV_DISABLE_PROMPT=1  # disables (venv) prepending prompt when venv activated, handled in PS1 var below
# shellcheck disable=SC2250
export PS1=$COLOR1'‚îå‚îÄ‚îÄ‚îÄ‚îÄ${VIRTUAL_ENV:+'$COLOR2'('$COLOR2'$(basename $VIRTUAL_ENV)'$COLOR2')'$COLOR1'-}'$COLOR3'('$COLOR3'\w'$COLOR3')'$COLOR1'-'$COLOR4'['$COLOR4'$(current_git_branch)'$COLOR4']\n'$COLOR1'‚îî‚îÄ'$COLOR4$PROMPT_SYMBOL$WHITE' '

if [[ -n "${WSL_DISTRO_NAME}" || "${MSYSTEM}" = "MINGW64" ]]; then
    export ON_WINDOWS=true
    # shellcheck disable=SC2155,SC2016
    export WINDOWS_USERNAME=$(powershell.exe '$env:UserName' | tr -d '\r\n')
fi

export PATH="${DOTFILES_DIR}/scripts:${HOME}/.local/bin:${PATH}"

# https://the.exa.website/docs/colour-themes
export EXA_COLORS='*.yaml=37;44:*.yml=37;44:*.json=37;42:*.ts=30;47;1:.*=33;40:package.json=30;47;1:pyproject.toml=30;47;1:package-lock.json=30;40;1:*.js=30;40;1:*.js.map=30;40;1'
