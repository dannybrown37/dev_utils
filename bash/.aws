#!/bin/bash


bl() {  # latest build logs in CLI; required arg is AWS stage
    [ $# -eq 0 ] && echo "Error: No args passed" && return
    aws-azure-login -f --profile $AWS_PROFILE --mode=debug
    aws s3 cp "s3://$BUILD_ARTIFACTS_BUCKET/$1-back-end-build-logs/$(aws s3 ls "s3://$BUILD_ARTIFACTS_BUCKET/${1}-back-end-build-logs/" | sort -n | tail -1 | awk '{ print $4 }' )" - | zcat -
}

open_lambda() {  # pop open browser to particular Lambda; first arg Lambda name; second arg (optional) AWS region
    [ $# -eq 0 ] && echo "Error: No args passed" && return
    [ $# -eq 1 ] && export AWS_REGION="us-east-1"
    aws-azure-login -f --profile $AWS_PROFILE --mode=debug
    URL="https://${AWS_REGION}.console.aws.amazon.com/lambda/home?region=${AWS_REGION}#/functions/$1?tab=monitoring"
    echo "Opening: $URL"
    cmd.exe /c start "$URL" 2>/dev/null
}
